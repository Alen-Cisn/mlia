{
    "version": "2.0.0",
    "tasks": [
        // === Basic Cargo Tasks ===
        {
            "label": "cargo build",
            "type": "shell",
            "command": "cargo",
            "args": ["build"],
            "group": {
                "kind": "build",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo build release",
            "type": "shell",
            "command": "cargo",
            "args": ["build", "--release"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo check",
            "type": "shell",
            "command": "cargo",
            "args": ["check"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo clippy",
            "type": "shell",
            "command": "cargo",
            "args": [
                "clippy",
                "--",
                "-W",
                "clippy::all",
                "-W",
                "clippy::pedantic",
                "-W",
                "clippy::nursery"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo fmt",
            "type": "shell",
            "command": "cargo",
            "args": ["fmt"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo clean",
            "type": "shell",
            "command": "cargo",
            "args": ["clean"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === Testing Tasks ===
        {
            "label": "cargo test",
            "type": "shell",
            "command": "cargo",
            "args": ["test"],
            "group": {
                "kind": "test",
                "isDefault": true
            },
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo test verbose",
            "type": "shell",
            "command": "cargo",
            "args": ["test", "--", "--nocapture"],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "test parser",
            "type": "shell",
            "command": "cargo",
            "args": ["test", "parser"],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "test tokenizer",
            "type": "shell",
            "command": "cargo",
            "args": ["test", "tokenizer"],
            "group": "test",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === MLia Interpreter Tasks ===
        {
            "label": "run mlia",
            "type": "shell",
            "command": "cargo",
            "args": ["run"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "run mlia with example",
            "type": "shell",
            "command": "cargo",
            "args": ["run", "--", "docs/main.mlia"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "run mlia with custom file",
            "type": "shell",
            "command": "cargo",
            "args": ["run", "--", "${input:mliaFile}"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "run mlia release",
            "type": "shell",
            "command": "cargo",
            "args": ["run", "--release"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": true,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === Documentation Tasks ===
        {
            "label": "cargo doc",
            "type": "shell",
            "command": "cargo",
            "args": ["doc", "--open"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo doc no-deps",
            "type": "shell",
            "command": "cargo",
            "args": ["doc", "--no-deps", "--open"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "silent",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === LLVM Preparation Tasks ===
        {
            "label": "check llvm-config",
            "type": "shell",
            "command": "llvm-config",
            "args": ["--version"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "install llvm dependencies",
            "type": "shell",
            "command": "cargo",
            "args": ["add", "inkwell", "--features", "llvm15-0"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === Development Workflow Tasks ===
        {
            "label": "full build and test",
            "dependsOrder": "sequence",
            "dependsOn": [
                "cargo fmt",
                "cargo clippy",
                "cargo build",
                "cargo test"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },
        {
            "label": "pre-commit checks",
            "dependsOrder": "sequence",
            "dependsOn": [
                "cargo fmt",
                "cargo clippy",
                "cargo test"
            ],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": true
            }
        },

        // === Debugging and Analysis Tasks ===
        {
            "label": "cargo expand",
            "type": "shell",
            "command": "cargo",
            "args": ["expand"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo tree",
            "type": "shell",
            "command": "cargo",
            "args": ["tree"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo audit",
            "type": "shell",
            "command": "cargo",
            "args": ["audit"],
            "group": "build",
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },

        // === Watch Tasks ===
        {
            "label": "cargo watch",
            "type": "shell",
            "command": "cargo",
            "args": ["watch", "-x", "check", "-x", "test"],
            "group": "build",
            "isBackground": true,
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        },
        {
            "label": "cargo watch run",
            "type": "shell",
            "command": "cargo",
            "args": ["watch", "-x", "run"],
            "group": "build",
            "isBackground": true,
            "presentation": {
                "echo": true,
                "reveal": "always",
                "focus": false,
                "panel": "shared",
                "showReuseMessage": true,
                "clear": false
            },
            "problemMatcher": ["$rustc"],
            "options": {
                "cwd": "${workspaceFolder}"
            }
        }
    ],
    "inputs": [
        {
            "id": "mliaFile",
            "description": "Path to MLia source file",
            "default": "docs/main.mlia",
            "type": "promptString"
        }
    ]
}